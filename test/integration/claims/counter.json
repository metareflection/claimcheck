{
  "predicates": [
    {
      "name": "Inv",
      "module": "Domain",
      "line": 5,
      "isGhost": true
    },
    {
      "name": "Inv",
      "module": "CounterDomain",
      "body": "m >= 0",
      "conjuncts": [
        "m >= 0"
      ],
      "line": 8,
      "isGhost": false
    },
    {
      "name": "Inv",
      "module": "Kernel.D.Abs",
      "line": 5,
      "isGhost": true
    },
    {
      "name": "HistInv",
      "module": "Kernel",
      "body": "(forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])) && D.Inv(h.present) && forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])",
      "conjuncts": [
        "forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])",
        "D.Inv(h.present)",
        "forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])"
      ],
      "line": 74,
      "isGhost": true
    },
    {
      "name": "HistInv",
      "module": "CounterKernel",
      "body": "(forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])) && D.Inv(h.present) && forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])",
      "conjuncts": [
        "forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])",
        "D.Inv(h.present)",
        "forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])"
      ],
      "line": 74,
      "isGhost": true
    }
  ],
  "lemmas": [
    {
      "name": "InitSatisfiesInv",
      "module": "Domain",
      "requires": [],
      "ensures": [
        "Inv(Init())"
      ],
      "line": 12
    },
    {
      "name": "StepPreservesInv",
      "module": "Domain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 15
    },
    {
      "name": "InitSatisfiesInv",
      "module": "CounterDomain",
      "requires": [],
      "ensures": [
        "Inv(Init())",
        "Inv(Init())"
      ],
      "line": 26
    },
    {
      "name": "StepPreservesInv",
      "module": "CounterDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))",
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 31
    },
    {
      "name": "InitSatisfiesInv",
      "module": "Kernel.D.Abs",
      "requires": [],
      "ensures": [
        "Inv(Init())"
      ],
      "line": 12
    },
    {
      "name": "StepPreservesInv",
      "module": "Kernel.D.Abs",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 15
    },
    {
      "name": "DoPreservesInv",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [
        "D.Inv(Do(h, a).present)"
      ],
      "line": 67
    },
    {
      "name": "InitHistorySatisfiesInv",
      "module": "Kernel",
      "requires": [],
      "ensures": [
        "HistInv(InitHistory())"
      ],
      "line": 80
    },
    {
      "name": "UndoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Undo(h))"
      ],
      "line": 86
    },
    {
      "name": "RedoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Redo(h))"
      ],
      "line": 92
    },
    {
      "name": "DoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Do(h, a))"
      ],
      "line": 98
    },
    {
      "name": "PreviewPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Preview(h, a))"
      ],
      "line": 105
    },
    {
      "name": "CommitFromPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)",
        "D.Inv(baseline)"
      ],
      "ensures": [
        "HistInv(CommitFrom(h, baseline))"
      ],
      "line": 112
    },
    {
      "name": "DoHasNoRedoBranch",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "Redo(Do(h, a)) == Do(h, a)"
      ],
      "line": 120
    },
    {
      "name": "UndoRedoRoundTrip",
      "module": "Kernel",
      "requires": [
        "|h.past| > 0"
      ],
      "ensures": [
        "Redo(Undo(h)) == h"
      ],
      "line": 126
    },
    {
      "name": "RedoUndoRoundTrip",
      "module": "Kernel",
      "requires": [
        "|h.future| > 0"
      ],
      "ensures": [
        "Undo(Redo(h)) == h"
      ],
      "line": 131
    },
    {
      "name": "UndoAtBeginningIsNoOp",
      "module": "Kernel",
      "requires": [
        "|h.past| == 0"
      ],
      "ensures": [
        "Undo(h) == h"
      ],
      "line": 137
    },
    {
      "name": "RedoAtEndIsNoOp",
      "module": "Kernel",
      "requires": [
        "|h.future| == 0"
      ],
      "ensures": [
        "Redo(h) == h"
      ],
      "line": 142
    },
    {
      "name": "DoPreservesInv",
      "module": "CounterKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [
        "D.Inv(Do(h, a).present)"
      ],
      "line": 67
    },
    {
      "name": "InitHistorySatisfiesInv",
      "module": "CounterKernel",
      "requires": [],
      "ensures": [
        "HistInv(InitHistory())"
      ],
      "line": 80
    },
    {
      "name": "UndoPreservesHistInv",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Undo(h))"
      ],
      "line": 86
    },
    {
      "name": "RedoPreservesHistInv",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Redo(h))"
      ],
      "line": 92
    },
    {
      "name": "DoPreservesHistInv",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Do(h, a))"
      ],
      "line": 98
    },
    {
      "name": "PreviewPreservesHistInv",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Preview(h, a))"
      ],
      "line": 105
    },
    {
      "name": "CommitFromPreservesHistInv",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)",
        "D.Inv(baseline)"
      ],
      "ensures": [
        "HistInv(CommitFrom(h, baseline))"
      ],
      "line": 112
    },
    {
      "name": "DoHasNoRedoBranch",
      "module": "CounterKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "Redo(Do(h, a)) == Do(h, a)"
      ],
      "line": 120
    },
    {
      "name": "UndoRedoRoundTrip",
      "module": "CounterKernel",
      "requires": [
        "|h.past| > 0"
      ],
      "ensures": [
        "Redo(Undo(h)) == h"
      ],
      "line": 126
    },
    {
      "name": "RedoUndoRoundTrip",
      "module": "CounterKernel",
      "requires": [
        "|h.future| > 0"
      ],
      "ensures": [
        "Undo(Redo(h)) == h"
      ],
      "line": 131
    },
    {
      "name": "UndoAtBeginningIsNoOp",
      "module": "CounterKernel",
      "requires": [
        "|h.past| == 0"
      ],
      "ensures": [
        "Undo(h) == h"
      ],
      "line": 137
    },
    {
      "name": "RedoAtEndIsNoOp",
      "module": "CounterKernel",
      "requires": [
        "|h.future| == 0"
      ],
      "ensures": [
        "Redo(h) == h"
      ],
      "line": 142
    }
  ],
  "functions": [
    {
      "name": "Apply",
      "module": "Domain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 8
    },
    {
      "name": "Apply",
      "module": "CounterDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 16
    },
    {
      "name": "Apply",
      "module": "Kernel.D.Abs",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 8
    },
    {
      "name": "Step",
      "module": "Kernel",
      "requires": [
        "D.Inv(m)"
      ],
      "ensures": [],
      "line": 23
    },
    {
      "name": "Do",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 36
    },
    {
      "name": "Preview",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 43
    },
    {
      "name": "Step",
      "module": "CounterKernel",
      "requires": [
        "D.Inv(m)"
      ],
      "ensures": [],
      "line": 23
    },
    {
      "name": "Do",
      "module": "CounterKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 36
    },
    {
      "name": "Preview",
      "module": "CounterKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 43
    },
    {
      "name": "Dispatch",
      "module": "AppCore",
      "requires": [
        "K.HistInv(h)"
      ],
      "ensures": [],
      "line": 50
    }
  ],
  "axioms": []
}