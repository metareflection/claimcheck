{
  "predicates": [
    {
      "name": "Inv",
      "module": "Domain",
      "line": 5,
      "isGhost": true
    },
    {
      "name": "Inv",
      "module": "DelegationAuthDomain",
      "body": "(forall sc: (Subject, Capability) {:trigger sc.0} {:trigger sc in m.grants} :: sc in m.grants ==> sc.0 in m.subjects) && (forall eid: int {:trigger m.delegations[eid]} {:trigger eid in m.delegations} :: (eid in m.delegations ==> m.delegations[eid].from in m.subjects) && (eid in m.delegations ==> m.delegations[eid].to in m.subjects)) && forall eid: int {:trigger eid in m.delegations} :: eid in m.delegations ==> eid < m.nextEdge",
      "conjuncts": [
        "forall sc: (Subject, Capability) {:trigger sc.0} {:trigger sc in m.grants} :: sc in m.grants ==> sc.0 in m.subjects",
        "forall eid: int {:trigger m.delegations[eid]} {:trigger eid in m.delegations} :: (eid in m.delegations ==> m.delegations[eid].from in m.subjects) && (eid in m.delegations ==> m.delegations[eid].to in m.subjects)",
        "forall eid: int {:trigger eid in m.delegations} :: eid in m.delegations ==> eid < m.nextEdge"
      ],
      "line": 30,
      "isGhost": true
    },
    {
      "name": "DerivableN",
      "module": "DelegationAuthDomain",
      "body": "if n == 0 then (s, cap) in m.grants else DerivableN(m, s, cap, n - 1) || exists eid: int {:trigger m.delegations[eid]} {:trigger eid in m.delegations} :: eid in m.delegations && m.delegations[eid].cap == cap && m.delegations[eid].to == s && DerivableN(m, m.delegations[eid].from, cap, n - 1)",
      "conjuncts": [
        "if n == 0 then (s, cap) in m.grants else DerivableN(m, s, cap, n - 1) || exists eid: int {:trigger m.delegations[eid]} {:trigger eid in m.delegations} :: eid in m.delegations && m.delegations[eid].cap == cap && m.delegations[eid].to == s && DerivableN(m, m.delegations[eid].from, cap, n - 1)"
      ],
      "line": 127,
      "isGhost": true
    },
    {
      "name": "HasCap",
      "module": "DelegationAuthDomain",
      "body": "exists n: nat {:trigger DerivableN(m, s, cap, n)} :: n <= |m.subjects| && DerivableN(m, s, cap, n)",
      "conjuncts": [
        "exists n: nat {:trigger DerivableN(m, s, cap, n)} :: n <= |m.subjects| && DerivableN(m, s, cap, n)"
      ],
      "line": 140,
      "isGhost": true
    },
    {
      "name": "Inv",
      "module": "Kernel.D.Abs",
      "line": 5,
      "isGhost": true
    },
    {
      "name": "HistInv",
      "module": "Kernel",
      "body": "(forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])) && D.Inv(h.present) && forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])",
      "conjuncts": [
        "forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])",
        "D.Inv(h.present)",
        "forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])"
      ],
      "line": 74,
      "isGhost": true
    },
    {
      "name": "HistInv",
      "module": "DelegationAuthKernel",
      "body": "(forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])) && D.Inv(h.present) && forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])",
      "conjuncts": [
        "forall i: int {:trigger h.past[i]} | 0 <= i < |h.past| :: _default.Inv(h.past[i])",
        "D.Inv(h.present)",
        "forall j: int {:trigger h.future[j]} | 0 <= j < |h.future| :: _default.Inv(h.future[j])"
      ],
      "line": 74,
      "isGhost": true
    }
  ],
  "lemmas": [
    {
      "name": "InitSatisfiesInv",
      "module": "Domain",
      "requires": [],
      "ensures": [
        "Inv(Init())"
      ],
      "line": 12
    },
    {
      "name": "StepPreservesInv",
      "module": "Domain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 15
    },
    {
      "name": "ReachCorrect",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "s in Reach(m, cap) <==> HasCap(m, s, cap)"
      ],
      "line": 146
    },
    {
      "name": "ReachNMonotone",
      "module": "DelegationAuthDomain",
      "requires": [],
      "ensures": [
        "ReachN(m, cap, n) <= ReachN(m, cap, n + 1)"
      ],
      "line": 169
    },
    {
      "name": "InitSatisfiesInv",
      "module": "DelegationAuthDomain",
      "requires": [],
      "ensures": [
        "Inv(Init())",
        "Inv(Init())"
      ],
      "line": 177
    },
    {
      "name": "StepPreservesInv",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 182
    },
    {
      "name": "ReachNImpliesDerivableN",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)",
        "s in ReachN(m, cap, n)"
      ],
      "ensures": [
        "DerivableN(m, s, cap, n)"
      ],
      "line": 190
    },
    {
      "name": "DerivableNImpliesReachN",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)",
        "DerivableN(m, s, cap, n)"
      ],
      "ensures": [
        "s in ReachN(m, cap, n)"
      ],
      "line": 214
    },
    {
      "name": "ReachNEquivDerivableN",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "s in ReachN(m, cap, n) <==> DerivableN(m, s, cap, n)"
      ],
      "line": 239
    },
    {
      "name": "ReachNMonotoneGeneral",
      "module": "DelegationAuthDomain",
      "requires": [
        "n <= k"
      ],
      "ensures": [
        "ReachN(m, cap, n) <= ReachN(m, cap, k)"
      ],
      "line": 251
    },
    {
      "name": "InitSatisfiesInv",
      "module": "Kernel.D.Abs",
      "requires": [],
      "ensures": [
        "Inv(Init())"
      ],
      "line": 12
    },
    {
      "name": "StepPreservesInv",
      "module": "Kernel.D.Abs",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [
        "Inv(Normalize(Apply(m, a)))"
      ],
      "line": 15
    },
    {
      "name": "DoPreservesInv",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [
        "D.Inv(Do(h, a).present)"
      ],
      "line": 67
    },
    {
      "name": "InitHistorySatisfiesInv",
      "module": "Kernel",
      "requires": [],
      "ensures": [
        "HistInv(InitHistory())"
      ],
      "line": 80
    },
    {
      "name": "UndoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Undo(h))"
      ],
      "line": 86
    },
    {
      "name": "RedoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Redo(h))"
      ],
      "line": 92
    },
    {
      "name": "DoPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Do(h, a))"
      ],
      "line": 98
    },
    {
      "name": "PreviewPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Preview(h, a))"
      ],
      "line": 105
    },
    {
      "name": "CommitFromPreservesHistInv",
      "module": "Kernel",
      "requires": [
        "HistInv(h)",
        "D.Inv(baseline)"
      ],
      "ensures": [
        "HistInv(CommitFrom(h, baseline))"
      ],
      "line": 112
    },
    {
      "name": "DoHasNoRedoBranch",
      "module": "Kernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "Redo(Do(h, a)) == Do(h, a)"
      ],
      "line": 120
    },
    {
      "name": "UndoRedoRoundTrip",
      "module": "Kernel",
      "requires": [
        "|h.past| > 0"
      ],
      "ensures": [
        "Redo(Undo(h)) == h"
      ],
      "line": 126
    },
    {
      "name": "RedoUndoRoundTrip",
      "module": "Kernel",
      "requires": [
        "|h.future| > 0"
      ],
      "ensures": [
        "Undo(Redo(h)) == h"
      ],
      "line": 131
    },
    {
      "name": "UndoAtBeginningIsNoOp",
      "module": "Kernel",
      "requires": [
        "|h.past| == 0"
      ],
      "ensures": [
        "Undo(h) == h"
      ],
      "line": 137
    },
    {
      "name": "RedoAtEndIsNoOp",
      "module": "Kernel",
      "requires": [
        "|h.future| == 0"
      ],
      "ensures": [
        "Redo(h) == h"
      ],
      "line": 142
    },
    {
      "name": "DoPreservesInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [
        "D.Inv(Do(h, a).present)"
      ],
      "line": 67
    },
    {
      "name": "InitHistorySatisfiesInv",
      "module": "DelegationAuthKernel",
      "requires": [],
      "ensures": [
        "HistInv(InitHistory())"
      ],
      "line": 80
    },
    {
      "name": "UndoPreservesHistInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Undo(h))"
      ],
      "line": 86
    },
    {
      "name": "RedoPreservesHistInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Redo(h))"
      ],
      "line": 92
    },
    {
      "name": "DoPreservesHistInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Do(h, a))"
      ],
      "line": 98
    },
    {
      "name": "PreviewPreservesHistInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "HistInv(Preview(h, a))"
      ],
      "line": 105
    },
    {
      "name": "CommitFromPreservesHistInv",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)",
        "D.Inv(baseline)"
      ],
      "ensures": [
        "HistInv(CommitFrom(h, baseline))"
      ],
      "line": 112
    },
    {
      "name": "DoHasNoRedoBranch",
      "module": "DelegationAuthKernel",
      "requires": [
        "HistInv(h)"
      ],
      "ensures": [
        "Redo(Do(h, a)) == Do(h, a)"
      ],
      "line": 120
    },
    {
      "name": "UndoRedoRoundTrip",
      "module": "DelegationAuthKernel",
      "requires": [
        "|h.past| > 0"
      ],
      "ensures": [
        "Redo(Undo(h)) == h"
      ],
      "line": 126
    },
    {
      "name": "RedoUndoRoundTrip",
      "module": "DelegationAuthKernel",
      "requires": [
        "|h.future| > 0"
      ],
      "ensures": [
        "Undo(Redo(h)) == h"
      ],
      "line": 131
    },
    {
      "name": "UndoAtBeginningIsNoOp",
      "module": "DelegationAuthKernel",
      "requires": [
        "|h.past| == 0"
      ],
      "ensures": [
        "Undo(h) == h"
      ],
      "line": 137
    },
    {
      "name": "RedoAtEndIsNoOp",
      "module": "DelegationAuthKernel",
      "requires": [
        "|h.future| == 0"
      ],
      "ensures": [
        "Redo(h) == h"
      ],
      "line": 142
    }
  ],
  "functions": [
    {
      "name": "Apply",
      "module": "Domain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 8
    },
    {
      "name": "Apply",
      "module": "DelegationAuthDomain",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 53
    },
    {
      "name": "Apply",
      "module": "Kernel.D.Abs",
      "requires": [
        "Inv(m)"
      ],
      "ensures": [],
      "line": 8
    },
    {
      "name": "Step",
      "module": "Kernel",
      "requires": [
        "D.Inv(m)"
      ],
      "ensures": [],
      "line": 23
    },
    {
      "name": "Do",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 36
    },
    {
      "name": "Preview",
      "module": "Kernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 43
    },
    {
      "name": "Step",
      "module": "DelegationAuthKernel",
      "requires": [
        "D.Inv(m)"
      ],
      "ensures": [],
      "line": 23
    },
    {
      "name": "Do",
      "module": "DelegationAuthKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 36
    },
    {
      "name": "Preview",
      "module": "DelegationAuthKernel",
      "requires": [
        "D.Inv(h.present)"
      ],
      "ensures": [],
      "line": 43
    },
    {
      "name": "Dispatch",
      "module": "DelegationAuthAppCore",
      "requires": [
        "K.HistInv(h)"
      ],
      "ensures": [],
      "line": 284
    }
  ],
  "axioms": []
}